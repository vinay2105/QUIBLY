{% extends 'base.html' %}
{% block title %}{{ target_user.username }}'s Profile{% endblock %}
{% block content %}

<div class="card shadow-sm mb-4">
    <div class="card-body d-flex align-items-center">
        <img src="{{ target_user.profile.profile_pic.url }}" width="100" height="100" class="rounded-circle me-3 border" alt="Profile Pic">
        <div class="w-100">
            <h3 class="mb-1">@{{ target_user.username }}</h3>
            <p class="mb-1"><strong>Bio:</strong> {{ target_user.profile.bio|default:"No bio yet." }}</p>
            <p class="mb-2">
                <strong>Followers:</strong> {{ target_user.profile.followers.count }} |
                <strong>Following:</strong> {{ target_user.profile.following.count }}
            </p>

            {% if user.is_authenticated and user != target_user %}
                <form method="post" action="{% url 'follow_toggle' target_user.username %}">
                    {% csrf_token %}
                    <button class="btn {% if is_following %}btn-danger{% else %}btn-outline-primary{% endif %}">
                        {% if is_following %}Unfollow{% else %}Follow{% endif %}
                    </button>
                </form>
            {% endif %}
        </div>
    </div>
</div>

<h5 class="mb-3">Tweets by @{{ target_user.username }}</h5>
{% for tweet in target_user.tweets.all %}
    <div class="card mb-3 shadow-sm">
        <div class="card-body">
            <p class="mb-1">{{ tweet.content }}</p>
            <small class="text-muted">{{ tweet.created_at|date:"M d, H:i" }}</small>
        </div>
    </div>
{% empty %}
    <p class="text-muted">No tweets yet.</p>
{% endfor %}

{% endblock %}


