{% extends 'base.html' %}
{% block title %}@{{ profile_user.username }}â€™s Connections{% endblock %}

{% block content %}
<style>
  body {
    background-color: #2a2a2e;
    color: #e6e6e6;
  }

  .connections-container {
    max-width: 900px;
    margin: 2rem auto;
    padding: 0 1rem;
  }

  .connections-header {
    text-align: center;
    margin-bottom: 2rem;
  }

  .connections-header img {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    border: 2px solid #444;
  }

  .connections-header h3 {
    margin-top: 0.5rem;
    font-weight: 600;
  }

  .nav-pills {
    display: flex;
    justify-content: center;
    gap: 1rem;
    margin-bottom: 2rem;
  }

  .nav-pills .nav-link {
    background-color: #3a3a3f;
    color: #e6e6e6;
    padding: 0.6rem 1.2rem;
    border-radius: 8px;
    transition: background-color 0.2s;
    border: none;
  }

  .nav-pills .nav-link.active {
    background-color: #555;
    color: #fff;
  }

  .list-group {
    padding-left: 0;
  }

  .list-group-item {
    background-color: #2b2b2f;
    border: 1px solid #444;
    border-radius: 8px;
    margin-bottom: 0.6rem;
    transition: background-color 0.2s;
    padding: 0.6rem 0.8rem;
  }

  .list-group-item:hover {
    background-color: #3a3a3f;
  }

  .list-group-item a {
    display: flex;
    align-items: center;
    color: #e6e6e6;
    text-decoration: none;
  }

  .list-group-item a img {
    width: 38px;
    height: 38px;
    border-radius: 50%;
    border: 1px solid #555;
    margin-right: 0.75rem;
  }

  .no-connections {
    text-align: center;
    color: #aaa;
    padding: 1rem 0;
  }
</style>

<div class="connections-container">
  <!-- Profile Header -->
  <div class="connections-header">
    <img src="{{ profile_user.profile.profile_pic.url }}" alt="Profile Picture">
    <h3>@{{ profile_user.username }}</h3>
  </div>

  <!-- Tabs -->
  <ul class="nav nav-pills" id="connTabs" role="tablist">
    {% if profile_user != request.user %}
      <li class="nav-item" role="presentation">
        <button class="nav-link active" data-bs-toggle="pill" data-bs-target="#mutual" type="button">Mutual ({{ mutual|length }})</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" data-bs-toggle="pill" data-bs-target="#following" type="button">Following ({{ following|length }})</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" data-bs-toggle="pill" data-bs-target="#followers" type="button">Followers ({{ followers|length }})</button>
      </li>
    {% else %}
      <li class="nav-item" role="presentation">
        <button class="nav-link active" data-bs-toggle="pill" data-bs-target="#following" type="button">Following ({{ following|length }})</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" data-bs-toggle="pill" data-bs-target="#followers" type="button">Followers ({{ followers|length }})</button>
      </li>
    {% endif %}
  </ul>

  <!-- Content Panes -->
  <div class="tab-content mt-3">
    {% if profile_user != request.user %}
    <div class="tab-pane fade show active" id="mutual" role="tabpanel">
      {% if mutual %}
        <ul class="list-group">
          {% for p in mutual %}
          <li class="list-group-item">
            <a href="{% url 'public_profile' p.user.username %}">
              <img src="{{ p.profile_pic.url }}" alt="@{{ p.user.username }}">
              <span>@{{ p.user.username }}</span>
            </a>
          </li>
          {% endfor %}
        </ul>
      {% else %}
        <div class="no-connections">No mutual connections.</div>
      {% endif %}
    </div>
    {% endif %}

    <div class="tab-pane fade {% if profile_user == request.user %}show active{% endif %}" id="following" role="tabpanel">
      {% if following %}
        <ul class="list-group">
          {% for p in following %}
          <li class="list-group-item">
            <a href="{% url 'public_profile' p.user.username %}">
              <img src="{{ p.profile_pic.url }}" alt="@{{ p.user.username }}">
              <span>@{{ p.user.username }}</span>
            </a>
          </li>
          {% endfor %}
        </ul>
      {% else %}
        <div class="no-connections">Not following anyone.</div>
      {% endif %}
    </div>

    <div class="tab-pane fade" id="followers" role="tabpanel">
      {% if followers %}
        <ul class="list-group">
          {% for p in followers %}
          <li class="list-group-item">
            <a href="{% url 'public_profile' p.user.username %}">
              <img src="{{ p.profile_pic.url }}" alt="@{{ p.user.username }}">
              <span>@{{ p.user.username }}</span>
            </a>
          </li>
          {% endfor %}
        </ul>
      {% else %}
        <div class="no-connections">No followers yet.</div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}




